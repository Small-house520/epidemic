<!DOCTYPE html>
<html>

<head>
<!-- 页面meta -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>查看流程</title>
<!-- Tell the browser to be responsive to screen width -->
<meta
	content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"
	name="viewport">
<link rel="stylesheet" href="../plugins/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="../plugins/adminLTE/css/AdminLTE.css">
<link rel="stylesheet"
	href="../plugins/adminLTE/css/skins/_all-skins.min.css">
<link rel="stylesheet" href="../css/style.css">
<link rel="stylesheet" href="../css/content.css">
<script src="../plugins/jQuery/jquery-2.2.3.min.js"></script>
<script src="../plugins/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript">
	//确认删除函数
	function delConf(id) {
		if (confirm("确定删除该条部署流程吗")) {
			window.location.href = "../deploymentdel?deploymentId=" + id;
		}
	}
</script>
</head>

<body class="hold-transition skin-red sidebar-mini">
	<!-- .box-body -->
	<div class="box-header with-border">
		<h3 class="box-title">查看流程</h3>
	</div>

	<div class="box-body">

		<!-- 数据表格 -->
		<div class="table-box">

			<!--工具栏-->
			<div class="pull-left">
				<div class="form-group form-inline">
					<div class="btn-group">
						<button type="button" class="btn btn-default" title="新建"
							data-toggle="modal" data-target="#editModal">
							<i class="fa fa-file-o"></i> 新建
						</button>
						<button type="button" class="btn btn-default" title="删除">
							<i class="fa fa-trash-o"></i> 删除
						</button>
						<button type="button" class="btn btn-default" title="刷新"
							onclick="window.location.reload();">
							<i class="fa fa-refresh"></i> 刷新
						</button>
					</div>
				</div>
			</div>

			<div class="box-tools pull-right">
				<div class="has-feedback">
					编号：<input type="number" id="campusId" name="campusId"
						placeholder="编号" value=""> 姓名： <input type="text"
						id="fullName" name="fullName" placeholder="姓名" value="">
					班级编号： <input type="number" id="classId" name="classId"
						placeholder="班级编号" value=""> 手机号码： <input type="number"
						id="phoneNumber" name="phoneNumber" placeholder="手机号码" value="">
					<button class="btn btn-default">查询</button>
				</div>
			</div>
			<!--工具栏/-->

			<!--数据列表-->
			<table id="dataList"
				class="table table-bordered table-striped table-hover dataTable">
				<thead>
					<tr>
						<th class="" style="padding-right: 0px"><input id="selall"
							type="checkbox" class="icheckbox_square-blue"></th>
						<th class="sorting_asc">编号</th>
						<th class="sorting">姓名</th>
						<th class="sorting">性别</th>
						<th class="sorting">年龄</th>
						<th class="sorting">职称/岗位</th>
						<th class="sorting">班级编号</th>
						<th class="sorting">手机号码</th>
						<th class="sorting">现住址</th>


						<th class="text-center">操作</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td><input type="checkbox"></td>
						<td>1</td>
						<td>梦琪琪商贸有限公司</td>
						<td>梦琪琪</td>
						<td>李梦琪</td>
						<td>13402312232</td>
						<td>梦琪琪</td>
						<td>李梦琪</td>
						<td>13402312232</td>

						<td class="text-center">
							<button type="button" class="btn bg-olive btn-xs"
								data-toggle="modal" data-target="#sellerModal">详情</button>
						</td>
					</tr>
					<tr>
						<td><input type="checkbox"></td>
						<td>2</td>
						<td>黑瞎子苹果专卖店</td>
						<td>黑瞎子</td>
						<td>孙大鹏</td>
						<td>13622244111</td>
						<td>黑瞎子</td>
						<td>孙大鹏</td>
						<td>13622244111</td>

						<td class="text-center">
							<button type="button" class="btn bg-olive btn-xs"
								data-toggle="modal" data-target="#sellerModal">详情</button>
							<button type="button" class="btn bg-olive btn-xs"
								data-toggle="modal" data-target="#editModal">编辑</button>
						</td>
					</tr>
				</tbody>
			</table>
			<!--数据列表/-->


		</div>
		<!-- 数据表格 /-->




	</div>
	<!-- /.box-body -->




	<!-- 商家详情 -->
	<div class="modal fade" id="sellerModal" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-hidden="true">×</button>
					<h3 id="myModalLabel">用户详情</h3>
				</div>
				<div class="modal-body">

					<ul class="nav nav-tabs">
						<li class="active"><a href="#certificate" data-toggle="tab">证件信息</a></li>
						<li><a href="#contact" data-toggle="tab">紧急联系人</a></li>
					</ul>

					<!-- 选项卡开始 -->
					<div id="myTabContent" class="tab-content">
						<div class="tab-pane fade" id="certificate">
							<br>
							<table class="table table-bordered table-striped">
								<tr>
									<td>身份证号</td>
									<td>7822332278223322</td>
								</tr>
							</table>
						</div>
						<div class="tab-pane active in" id="contact">
							<br>
							<table class="table table-bordered table-striped" width="800px">
								<tr>
									<td>紧急联系人</td>
									<td>美琪数码</td>
								</tr>
								<tr>
									<td>紧急联系人手机号码</td>
									<td>13900221212</td>
								</tr>
							</table>
						</div>

					</div>
					<!-- 选项卡结束 -->


				</div>
				<div class="modal-footer">
					<!-- <button class="btn btn-success" data-dismiss="modal"
							aria-hidden="true">审核通过</button>
						<button class="btn btn-danger" data-dismiss="modal"
							aria-hidden="true">审核未通过</button> -->
					<button class="btn btn-default" data-dismiss="modal"
						aria-hidden="true">关闭</button>
				</div>
			</div>
		</div>
	</div>

	<!-- 编辑窗口 -->
	<div class="modal fade" id="editModal" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-hidden="true">×</button>
					<h3 id="myModalLabel">用户编辑</h3>
				</div>
				<div class="modal-body">

					<table class="table table-bordered table-striped" width="800px">
						<tr>
							<td>编号</td>
							<td><input type="number" id="campusId" name="campusId"
								class="form-control" placeholder="编号"></td>
						</tr>
						<tr>
							<td>姓名</td>
							<td><input type="text" id="fullName" name="fullName"
								class="form-control" placeholder="姓名"></td>
						</tr>
						<tr>
							<td>性别</td>
							<td><input type="text" id="gender" name="gender"
								class="form-control" placeholder="性别"></td>
						</tr>
						<tr>
							<td>年龄</td>
							<td><input type="number" id="age" name="age"
								class="form-control" placeholder="年龄"></td>
						</tr>
						<tr>
							<td>身份证号</td>
							<td><input type="text" id="idNumber" name="idNumber"
								class="form-control" placeholder="身份证号"></td>
						</tr>
						<tr>
							<td>职称/岗位</td>
							<td><input type="text" id="post" name="post"
								class="form-control" placeholder="职称/岗位"></td>
						</tr>
						<tr>
							<td>班级编号</td>
							<td><input type="number" id="classId" name="classId"
								class="form-control" placeholder="班级编号"></td>
						</tr>
						<tr>
							<td>手机号码</td>
							<td><input type="text" id="phoneNumber" name="phoneNumber"
								class="form-control" placeholder="手机号码"></td>
						</tr>
						<tr>
							<td>紧急联系人</td>
							<td><input type="text" id="emergencyContact"
								name="emergencyContact" class="form-control" placeholder="紧急联系人">
							</td>
						</tr>
						<tr>
							<td>紧急联系人手机号码</td>
							<td><input type="text" id="emergencyContactPhone"
								name="emergencyContactPhone" class="form-control"
								placeholder="紧急联系人手机号码"></td>
						</tr>
						<tr>
							<td>现住址</td>
							<td><input type="text" id="address" name="address"
								class="form-control" placeholder="现住址"></td>
						</tr>
					</table>

				</div>
				<div class="modal-footer">
					<button class="btn btn-success" data-dismiss="modal"
						aria-hidden="true">保存</button>
					<button class="btn btn-default" data-dismiss="modal"
						aria-hidden="true">关闭</button>
				</div>
			</div>
		</div>
	</div>

	<div class="page-content">
		<form class="form-inline">
			<div class="panel panel-default">
				<div class="panel-heading">部署信息管理列表</div>

				<div class="table-responsive">
					<table class="table table-striped table-hover" id="tb">
						<thead>
							<tr>
								<th width="20%">ID</th>
								<th width="30%">流程名称</th>
								<th width="30%">发布时间</th>
								<th width="20%"><shiro:hasPermission name="workflow:remove">操作</shiro:hasPermission></th>
							</tr>
						</thead>
						<tbody>
							<c:forEach var="dep" items="${depList}">
								<tr>
									<td>${dep.id}</td>
									<td>${dep.name}</td>
									<td><fmt:formatDate value="${dep.deploymentTime}"
											pattern="yyyy-MM-dd HH:mm:ss" /></td>
									<td><shiro:hasPermission name="workflow:remove">
											<a href="#" onclick="delConf(${dep.id})"
												class="btn btn-danger btn-xs"><span
												class="glyphicon glyphicon-remove"></span> 删除</a>
										</shiro:hasPermission></td>
								</tr>
							</c:forEach>
						</tbody>
					</table>
				</div>
			</div>
		</form>

		<form class="form-inline">
			<div class="panel panel-default">
				<div class="panel-heading">流程定义信息列表</div>

				<div class="table-responsive">
					<table class="table table-striped table-hover" id="tb2">
						<thead>
							<tr>
								<th width="12%">ID</th>
								<th width="18%">名称</th>
								<th width="10%">流程定义的KEY</th>
								<th width="10%">流程定义的版本</th>
								<th width="15%">流程定义的规则文件名称</th>
								<th width="15%">流程定义的规则图片名称</th>
								<th width="10%">部署ID</th>
								<th width="10%">操作</th>
							</tr>
						</thead>
						<tbody>
							<c:forEach var="pd" items="${pdList}">
								<tr>
									<td>${pd.id}</td>
									<td>${pd.name}</td>
									<td>${pd.key}</td>
									<td>${pd.version}</td>
									<td>${pd.resourceName}</td>
									<td>${pd.diagramResourceName}</td>
									<td>${pd.deploymentId}</td>
									<td><a target="_blank"
										href="viewImage?deploymentId=${pd.deploymentId}&imageName=${pd.diagramResourceName}"
										class="btn btn-success btn-xs"><span
											class="glyphicon glyphicon-eye-open"></span> 流程定义图</a></td>
								</tr>
							</c:forEach>
						</tbody>
					</table>
				</div>
			</div>
		</form>

	</div>

</body>
<script>
	//实现表格分页
    $("#tb,#tb2").bootstrapTable({
    	//点击行事件,element为被点击行的tr元素对象
        onClickRow: function (row, $element) {
            $element.each(function () {
                //获取所有td的值
                var tds = $(this).find("td")
                /* var id = tds.eq(0).text()
                var title = tds.eq(1).text()
                var remark = tds.eq(2).text()
                var money = tds.eq(3).text()
                var creatdate = tds.eq(4).text()
                var state = tds.eq(5).text() */
            })
        },
        pageNumber: 1,			//首页页码
        pagination: true,   	//是否显示分页条
        pageSize: 3,         	//默认一页显示的行数
        paginationLoop: false,  //是否开启分页条无限循环，最后一页时点击下一页是否转到第一页
        pageList: [3,6,10],   	//选择每页显示多少行
        search: true,			//启用关键字搜索框
        sortable: true	 		// 是否启用排序
        
    });
</script>
</html>